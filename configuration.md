# Конфігурація

- [Вступ](#introduction)
- [Конфігурація середовища](#environment-configuration)
    - [Отримання конфігурації середовища](#retrieving-environment-configuration)
    - [Визначення поточного середовища](#determining-the-current-environment)
- [Доступ до значень конфігурації](#accessing-configuration-values)
- [Кешування конфігурації](#configuration-caching)
- [Режим технічного обслуговування](#maintenance-mode)

<a name="introduction"></a>
## Вступ

Всі файли конфігурації Laravel зберігаються в каталозі `config`. Кожен параметр документально оформлений, тому не соромтеся переглядати файли та ознайомитися з доступними вам параметрами.

<a name="environment-configuration"></a>
## Конфігурація середовища

Іноді корисно мати різні значення конфігурації на основі середовища, де працює програма. Наприклад, ви можете використати інший драйвер кешу локально, ніж на продакшен-сервері.

Для цього Laravel використовує PHP бібліотеку [DotEnv](https://github.com/vlucas/phpdotenv) створену Vance Lucas. Після свіжої інсталяції Laravel, у вашому головному каталогу ви знайдете файл `.env.example`. Якщо ви встановили Laravel через Composer, цей файл буде автоматично переіменований в `.env`. В іншому випадку, вам необхідно перейменувати файл вручну.

Ваш файл `.env` повинен бути прихований від вашої програми контролю версій, оскільки кожен розробник / сервер може вимагати іншої конфігурації середовища. Крім того, це може бути небезпечно, у випадку якщо зловмисник отримає доступ до вашого сховища програми контролю версій, оскільки будь які конфіденційні дані будуть виявлені.

Якщо ви працюєте в команді, ви можете залишити файл `.env.example` у вашій програмі. Поширюючи плейсхолдери в цьому файлі, інші розробники у вашій команді можуть чітко бачити які змінні середовища необхідні для запуску вашої програми. Ви також можете створити файл `.env.testing`. Цей файл замінить файл `.env` коли будуть запущені тести PHPUnit або запущена Artisan-команда з параметром `--env=testing`.

> {tip} Будь-яка змінна у вашому файлі `.env` може бути перевизначена за допомогою змінних зовнішнього середовища, таких як змінні середовища на рівні сервера або системного рівня.

<a name="retrieving-environment-configuration"></a>
### Отримання конфігурації середовища

Усі змінні, перелічені в цьому файлі, будуть завантажені в PHP супер-глобальну змінну `$_ENV`. Крім цього, ви можете використовувати хелпер `env` для отримання значень змінних у ваших конфігураційних файлах. Справді, якщо ви переглянете файли конфігурації Laravel, ви помітите декілька варіантів, які вже використовують цей хелпер.

    'debug' => env('APP_DEBUG', false),

Другий аргумент, переданий в функцію `env`, є "значення за замовчуванням". Це значення буде використано, якщо для даного ключа не існує змінної середовища.

<a name="determining-the-current-environment"></a>
### Визначення поточного середовища

Поточне середовище визначається за допомогою змінної `APP_ENV` з вашого файлу `.env`. Ви можете отримати доступ до цього значення за допомогою метода `environment` в [фасаді](/docs/{{version}}/facades) `App`:

    $environment = App::environment();

Ви також можете передавати аргументи методу `environment`, щоб перевірити, чи відповідає середовище певному значенню. Метод поверне "true", якщо середовище відповідає будь-якому з заданих значень:

    if (App::environment('local')) {
        // Локальне середовище
    }

    if (App::environment(['local', 'staging'])) {
        // Локальне або стейджін середовище
    }

> {tip} Виявлення поточного середовища можна переоприділити змінною середовища `APP_ENV` на рівні серверу. Це може бути корисним, коли вам треба використовувати одну й ту ж програму для різних налаштувань середовища, тому ви можете налаштувати переданий хост для відповідності даному середовищу в налаштуваннях вашого сервера.



<a name="accessing-configuration-values"></a>
## Доступ до значень конфігурації

Ви можете легко отримати доступ до ваших значень конфігурації за допомогою глобального хелпера `config` з будь-якого місця вашої програми. Значення конфігурації можна отримати за допомогою синтаксису "крапки", який включає ім'я файлу та параметр, до якого ви хочете отримати доступ. Значення за замовчуванням також може бути вказано і буде повернуто, якщо параметр конфігурації не існує:

    $value = config('app.timezone');

Щоб встановити значення параметрів конфігурації під час виконання, передайте масив у хелпер `config`

    config(['app.timezone' => 'America/Chicago']);

<a name="configuration-caching"></a>
## Кешування конфігурацій

Щоб пришвидшити вашу програму, ви повинні кешувати всі ваші файли конфігурації в одному файлі за допомогою Artisan-команди `config: cache` Це поєднує всі параметри конфігурації вашої програми в єдиний файл, який буде завантажений швидко.

Зазвичай ви повинні запускати команду `php artisan config:cache` як частину процедури дуплоя на продакшені. Команда не повинна запускатися в локальному середовищі, оскільки параметри конфігурації часто потрібно змінювати під час розробки вашої програми.

> {note} Якщо ви виконуєте команду `config:cache` під час процесу розгортання, ви повинні бути впевнені, що ви викликаєте функцію `env` тільки з ваших файлів конфігурації.

<a name="maintenance-mode"></a>
## Режим технічного обслуговування

Коли ваша програма перебуває в режимі технічного обслуговування, для всіх запитів у вашу програму буде відображено спеціальний вигляд. Це полегшує "відключення" вашої програми під час оновлення або під час виконання технічного обслуговування. Перевірка режиму технічного обслуговування включена в стандартний набір посередників для вашої програми. Якщо програма знаходиться в режимі технічного обслуговування, буде відображено `MaintenanceModeException` з кодом стану 503.

Щоб увімкнути режим обслуговування, просто виконайте Artisan-команду `down`:

    php artisan down

Також ви можете передати в команду `down` опції `message` і `retry`. Значення `message` можна використовувати для виведення або запису в журнал необхідного повідомлення, а значення `retry` буде задано як значення HTTP-заголовку `Retry-After`:

    php artisan down --message="Upgrading Database" --retry=60

Для вимкнення режиму технічного обслуговування виконайте команду `up`:

    php artisan up

> {tip} Ви можете кастомізувати стандартний шаблон режиму обслуговування, визначивши свій власний шаблон в `resources/views/errors/503.blade.php`.

#### Режим обслуговування та черги

Поки ваша програма знаходиться в режимі технічного обслуговування, не будуть оброблятися жодні [завдання черги](/docs/{{version}}/queues). Робота буде продовжена в звичайному режимі, як тільки програма вийде з режиму технічного обслуговування.

#### Альтернативи режиму технічного обслуговування

Оскільки режим обслуговування передбачає зупинку вашої програми на якийсь час, розгляньте альтернативи, такі як [Envoyer](https://envoyer.io), щоб оновлювати вашу програму без зупинки її роботи.
